{
  "packages": [
    "github.com/graniticio/granitic/ws/handler",
    "github.com/graniticio/granitic-examples/recordstore/inventory"
  ],

  "components": {

    "createRecordLogic": {
      "type": "inventory.CreateRecordLogic",
      "DAO": "ref:inventoryDAO"
    },

    "createRecordHandler": {
      "ct": "private",
      "HTTPMethod": "POST",
      "Logic": "ref:createRecordLogic",
      "PathPattern": "^/record$",
      "AutoValidator": "ref:createRecordValidator"
    },

    "createRecordValidator": {
      "ct": "validator",
      "DefaultErrorCode": "CREATE_RECORD",
      "Rules": "conf:createRecordRules"
    },

    "inventoryDAO": {
      "type": "inventory.InventoryDAO"
    },


    "searchLogic": {
      "type": "inventory.SearchLogic",
      "DAO": "ref:inventoryDAO"
    },

    "searchHandler": {
      "ct": "public",
      "HTTPMethod": "GET",
      "Logic": "ref:searchLogic",
      "PathPattern": "^/search/([A-Za-z]+)[/]?$",
      "AutoValidator": "ref:searchValidator",
      "BindPathParams": ["Mode"],
      "AutoBindQuery": true
    },

    "searchValidator": {
      "ct": "validator",
      "DefaultErrorCode": "SEARCH",
      "Rules": "conf:searchRules"
    },

    "artistLogic": {
      "type": "inventory.ArtistLogic",
      "DAO": "ref:inventoryDAO"
    },

    "artistHandler": {
      "ct": "public",
      "HTTPMethod": "GET",
      "Logic": "ref:artistLogic",
      "PathPattern": "^/artist/([\\d]+)[/]?$",
      "BindPathParams": ["ID"]
    }
  }
}
